(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);for(var a=n(0),r=n.n(a),o=n(5),s=n.n(o),i=(n(12),n(2)),l=n(1),u=n.n(l),c=(n(13),function(e){var t={};return e.reduce(function(e,n){return t[n]=[],e.on[n]=function(e){return t[n].push(e),function(){t[n]=t[n].filter(function(t){return t!==e})}},e.dispatch[n]=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];t[n].forEach(function(e){return e.apply(void 0,a)})},e},{dispatch:{},on:{}})}),f=function(){var e,t=0,n=!0,a=function(){s.timePasses()},r=function(e){n=e,s.pausedChanges(n)},o=c(["timePasses","pausedChanges"]),s=o.dispatch,i=o.on;return{paused:function(){return n},play:function(){n&&(function n(){a(),e=setTimeout(n,t)}(),r(!1))},pause:function(){n||(clearTimeout(e),r(!0))},passTime:a,setPlayInterval:function(e){return t=e},on:i}},d=n(3),m=["doorsOpen","doorsChange","floorChanges","timePasses","requestsChange","destinationsChange","reset"],h=function(e){var t=0,n=1,a=1,r=[],o=[],s=0,i=0,l=0,u=function(){var e=function(e){return e*a>n*a},t=r.filter(e);return!(o.map(function(e){return e.floor}).filter(e).length+t.length)},f=function(){if(h().length)return!0;if(p().length){if(u())return!0;if(g().length)return!0}return!1},h=function(){return r.filter(function(e){return e===n})},p=function(){return o.filter(function(e){return e.floor===n})},g=function(){return p().filter(function(e){return e.direction===a})},b=function(){return 1===t},v=function(e){return e==n&&b()},E=function(){i=0,t=2},w=function(){b()&&(l=s)},k=c(m),O=k.dispatch,C=k.on;return{addDestination:function(e){v(e)?l=0:(r.push(e),1===t&&w(),O.destinationsChange(Object(d.a)(r)))},requestElevator:function(e,t){!function(e,t){return v(e)&&(u()||a===t)}(e,t)?(o.push({floor:e,direction:t}),O.requestsChange(Object(d.a)(o))):l=0},passTime:function(){switch(t){case 0:if(f()){!function(){l=0,r=r.filter(function(e){return e!==n});var e=u()?function(e){return e.floor!==n}:function(e){return e.floor!==n||e.direction!==a};o=o.filter(e),t=1,O.doorsOpen(n,a,u()),O.doorsChange(b()),O.destinationsChange(Object(d.a)(r)),O.requestsChange(Object(d.a)(o))}();break}if(r.length+o.length){u()&&(a*=-1),E();break}break;case 1:if(l>=s){t=0,O.doorsChange(b());break}++l;break;case 2:if(i>=0){if(n+=a,O.floorChanges(n),f()){t=0;break}E();break}++i;break;default:throw"unhandled elevator state ".concat(t)}O.timePasses()},setOpenTimeout:function(e){s=e},allowDoorsToClose:w,reset:function(){t=0,l=0,i=0,n=1,a=1,r=[],o=[],O.reset(n,Object(d.a)(r),Object(d.a)(o),b())},on:C}},p=function(e,t){var n,a=function(){var n=function(e,t){return Math.round((t-e)*Math.random())+e},a=function(){return n(t[0],+t.slice(-1))},r=0,o=0;switch(n(1,-1)){case 1:r=t[0],o=a();break;case-1:r=a(),o=t[0];break;default:r=a(),o=a()}if(r!==o){var s=r<o?1:-1,i=!1,l=function(){u(),c()},u=e.on.reset(l),c=e.on.doorsOpen(function(t,n,a){if(!i&&t===r&&(a||n===s))return e.addDestination(o),void(i=!0);i&&t===o&&(e.allowDoorsToClose(),l())});e.requestElevator(r,s)}},r=function(){Math.random()<.16&&a()},o=c(["toggle"]),s=o.dispatch,i=o.on;return{toggle:function(){if(n)return n(),n=void 0,void s.toggle(!1);n=e.on.timePasses(r),s.toggle(!0)},spawn:a,on:i}},g=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],s=n[1];return r.a.createElement("button",Object.assign({},e,{onClick:function(t){e.onClick&&e.onClick(),o&&clearTimeout(o),s(setTimeout(function(){s(!1)},140))},className:u()(e.className,o&&"clicked")}))},b=[800,140],v=function(e){var t=e.passTime,n=e.paused,o=e.play,s=e.pause,l=e.setPlayInterval,c=e.setOpenTimeout,f=(e.setQuickAnimations,Object(a.useState)(0)),d=Object(i.a)(f,2),m=d[0],h=d[1];Object(a.useEffect)(function(){l(b[m]),p()},[]);var p=function(){c(5),o()};return r.a.createElement("div",{className:"row"},r.a.createElement(g,{children:n?"|>":"||",onClick:function(){n?t():(c(0),s())}}),r.a.createElement(g,{children:m?">>":">",className:u()(!n&&"toggled"),onClick:function(){n?p():function(){var e=(m+1)%b.length;l(b[e]),h(e)}()}}))},E=function(e){var t=e.spawnPassenger,n=e.toggleUsageSimulator,a=e.reset,o=e.usageSimulatorIsEnabled;return r.a.createElement("div",{className:"row"},r.a.createElement(g,{onClick:t,children:"Random passenger"}),r.a.createElement(g,{className:u()(o&&"toggled"),onClick:n,children:"Simulate usage"}),r.a.createElement(g,{onClick:a,children:"x"}))},w=function(e){var t=e.floor,n=e.floors,a=e.isCurrentFloor,o=e.elevatorDoorsOpen,s=e.requests,i=e.isDestination,l=e.requestElevator,c=!!s.find(function(e){return 1===e.direction}),f=!!s.find(function(e){return-1===e.direction}),d=a&&o,m=a&&!o,h=t===+n.slice(-1),p=t===n[0],b=!d&&(i||c||f);return r.a.createElement("div",{className:u()("row","floor-display",a&&"highlight")},r.a.createElement("div",{children:"Floor ".concat(t),className:u()("floor-state",b&&"yellow",d&&"white",!b&&!d&&"hidden")}),r.a.createElement(g,{children:"Down",className:u()(f&&"toggled"),onClick:function(){return l(t,-1)},disabled:p}),r.a.createElement(g,{children:"Up",className:u()(c&&"toggled"),onClick:function(){return l(t,1)},disabled:h}),r.a.createElement("div",{children:d?"|__|":"_||_",className:u()("floor-door-state",m&&"yellow",d&&"white",!a&&"hidden")}))},k=function(e){var t=e.floors,n=e.currentFloor,a=e.requests,o=e.destinations,s=e.doorsOpen,i=e.requestElevator;return r.a.createElement("div",{className:"floor-bank panel"},t.map(function(e){return r.a.createElement(w,{floor:e,floors:t,isCurrentFloor:e===n,elevatorDoorsOpen:s,requests:a.filter(function(t){return t.floor===e}),isDestination:!!o.find(function(t){return t===e}),requestElevator:i,key:e})}))},O=function(e){var t=e.floors,n=e.destinations,a=e.addDestination,o=function(e){return!!n.find(function(t){return t===e})};return r.a.createElement("div",{className:"elevator-display"},t.map(function(e){return r.a.createElement(g,{children:e,key:e,className:u()(o(e)&&"toggled"),onClick:function(){return a(e)}})}))},C=function(){return r.a.createElement("div",{className:"panel"},r.a.createElement("h4",null,"A brief explanation of the UI"),r.a.createElement("div",{className:"panel"},r.a.createElement("h3",null,"Top bar"),r.a.createElement("p",null,"From left to right"),r.a.createElement("p",null,r.a.createElement("b",null,"Pause/Step: ")," Clicking this button will pause the simulation. With each click after the first the simulation will execute one frame. This can be useful for watching what the elevator does under certain circumstances."),r.a.createElement("p",null,r.a.createElement("b",null,"Play/Fast Forward: ")," This button will unpause the simulation, and subsequent clicks will cycle between fast and regular play speeds."),r.a.createElement("p",null,r.a.createElement("b",null,"Random Passenger: ")," When you want to add a passenger to the simulation pushing this button will do so."),r.a.createElement("p",null,r.a.createElement("b",null,"Simulate usage: ")," This will periodically add random passengers to the simulation at random intervals.  Handy for seeing how the elevator will behave under normal circumstances. Clicking again will disable this feature."),r.a.createElement("p",null,r.a.createElement("b",null,"Reset: ")," If you want to put the elevator back into its initial state click this button. This is useful when you want to run specific test.  This button will not reset the play settings so you may want to make sure you enter step by step mode, and disabled usage simulation before resetting.")),r.a.createElement("div",{className:"panel"},r.a.createElement("h3",null,"Left section"),r.a.createElement("p",null,"This section is broken up into floors. Pressing any up or down button will summon the elevator to that floor. It also show the current floor of the elevator, and when the doors are open.")),r.a.createElement("div",{className:"panel"},r.a.createElement("h3",null,"Right section"),r.a.createElement("p",null,"This represents the options available to a passenger inside the elevator. Pressing any of the numbered buttons will inform the elevator that you want to travel to that level.")))},y=f(),j=h(10),T=[],N=1;N<=10;++N)T.push(N);var q=p(j,T);var P=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(0),l=Object(i.a)(s,2),c=l[0],f=l[1],d=Object(a.useState)([]),m=Object(i.a)(d,2),h=m[0],p=m[1],g=Object(a.useState)([]),b=Object(i.a)(g,2),w=b[0],N=b[1],P=Object(a.useState)(!1),S=Object(i.a)(P,2),D=S[0],I=S[1],F=Object(a.useState)(!1),x=Object(i.a)(F,2),A=x[0],R=x[1],U=Object(a.useState)(!1),_=Object(i.a)(U,2),M=_[0],J=_[1];Object(a.useEffect)(function(){var e=[];return e.push(y.on.timePasses(j.passTime)),e.push(y.on.pausedChanges(o)),e.push(j.on.floorChanges(f)),e.push(j.on.destinationsChange(p)),e.push(j.on.requestsChange(N)),e.push(j.on.doorsChange(I)),e.push(j.on.reset(function(e,t,n,a){f(e),p(t),N(n),I(a)})),e.push(q.on.toggle(R)),j.reset(),q.toggle(),function(){return e.forEach(function(e){return e()})}},[]);var Q=y.play,W=y.pause,B=y.passTime,H=y.setPlayInterval,L=j.addDestination,z=j.requestElevator,G=j.reset,K=j.setOpenTimeout,V=q.spawn,X=q.toggle;return r.a.createElement("div",{className:u()("app",M&&"quick-animations")},r.a.createElement("div",{className:"panel row top-bar"},r.a.createElement(v,{passTime:B,paused:n,play:Q,pause:W,setPlayInterval:H,setOpenTimeout:K,setQuickAnimations:J}),r.a.createElement(E,{spawnPassenger:V,toggleUsageSimulator:X,reset:G,usageSimulatorIsEnabled:A,elevator:j})),r.a.createElement("div",{className:"row"},r.a.createElement(k,{floors:T,currentFloor:c,requests:w,destinations:h,doorsOpen:D,requestElevator:z}),r.a.createElement(O,{floors:T,destinations:h,addDestination:L})),r.a.createElement(C,null))};s.a.render(r.a.createElement(P,null),document.getElementById("root"))},6:function(e,t,n){e.exports=n(14)}},[[6,1,2]]]);
//# sourceMappingURL=main.6c6d9db3.chunk.js.map