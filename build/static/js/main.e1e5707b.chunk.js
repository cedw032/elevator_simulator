(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);for(var a=n(0),r=n.n(a),o=n(5),l=n.n(o),i=(n(12),n(1)),s=n(2),u=n.n(s),c=(n(13),n(3)),f=function(e){var t={};return e.reduce(function(e,n){return t[n]=[],e.on[n]=function(e){return t[n].push(e),function(){t[n]=t[n].filter(function(t){return t!==e})}},e.dispatch[n]=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];t[n].forEach(function(e){return e.apply(void 0,a)})},e},{dispatch:{},on:{}})},d=["doorsOpen","doorsChange","floorChanges","timePasses","requestsChange","destinationsChange","reset"],m=function(e,t){var n,a=function(){var n=function(e,t){return Math.round((t-e)*Math.random())+e},a=function(){return n(t[0],+t.slice(-1))},r=0,o=0;switch(n(1,-1)){case 1:r=t[0],o=a();break;case-1:r=a(),o=t[0];break;default:r=a(),o=a()}if(r!==o){var l=r<o?1:-1,i=!1,s=function(){u(),c()},u=e.on.reset(s),c=e.on.doorsOpen(function(t,n,a){if(!i&&t===r&&(a||n===l))return e.addDestination(o),void(i=!0);i&&t===o&&(e.allowDoorsToClose(),s())});e.requestElevator(r,l)}},r=function(){Math.random()<.16&&a()},o=f(["toggle"]),l=o.dispatch,i=o.on;return{toggle:function(){if(n)return n(),n=void 0,void l.toggle(!1);n=e.on.timePasses(r),l.toggle(!0)},spawn:a,on:i}},h=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2)[1];return function(){return t({})}},p=[],g=function(e){var t=h(),n=Object(a.useState)(p.length),r=Object(i.a)(n,1)[0],o=p[r];o||(o={value:e},p.push(o));return[o,function(e){e!==o.value&&(o.value=e,t())}]},b=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],l=n[1];return r.a.createElement("button",Object.assign({},e,{onClick:function(t){e.onClick&&e.onClick(),o&&clearTimeout(o),l(setTimeout(function(){l(!1)},140))},className:u()(e.className,o&&"clicked")}))},v=[800,140],E=function(e){var t=e.passTime,n=e.setOpenTimeout,o=e.setQuickAnimations,l=g(!0),s=Object(i.a)(l,2),c=s[0],f=s[1],d=g(0),m=Object(i.a)(d,2),h=m[0],p=m[1];Object(a.useEffect)(function(){c.value&&w()},[]);var E=function(){p((h.value+1)%v.length),o(h.value)},w=function(){f(!0),n(5),setTimeout(O)},O=function e(){if(c.value)return t(),void setTimeout(e,v[h.value]);n(0)};return r.a.createElement("div",{className:"row"},r.a.createElement(b,{children:"|>",onClick:function(){f(!1),t()}}),r.a.createElement(b,{children:h.value?">>":">",className:u()(c.value&&"toggled"),onClick:function(){c.value?E():w()}}))},w=function(e){var t=e.spawnPassenger,n=e.toggleUsageSimulator,a=e.reset,o=e.usageSimulatorIsEnabled;return r.a.createElement("div",{className:"row"},r.a.createElement(b,{onClick:t,children:"Random passenger"}),r.a.createElement(b,{className:u()(o&&"toggled"),onClick:n,children:"Simulate usage"}),r.a.createElement(b,{onClick:a,children:"x"}))},O=function(e){var t=e.floor,n=e.floors,a=e.isCurrentFloor,o=e.elevatorDoorsOpen,l=e.requests,i=e.requestElevator,s=!!l.find(function(e){return 1===e.direction}),c=!!l.find(function(e){return-1===e.direction}),f=a&&o,d=a&&!o,m=t===+n.slice(-1),h=t===n[0];return r.a.createElement("div",{className:u()("row","floor-display",a&&"highlight")},r.a.createElement("div",null,"Floor ",t),r.a.createElement(b,{className:u()(c&&"toggled"),onClick:function(){return i(t,-1)},disabled:h,children:"Down"}),r.a.createElement(b,{className:u()(s&&"toggled"),onClick:function(){return i(t,1)},disabled:m,children:"Up"}),r.a.createElement("div",{className:u()("floor-door-state",d&&"yellow",f&&"white",!a&&"hidden"),children:f?"|__|":"_||_"}))},k=function(e){var t=e.floors,n=e.currentFloor,a=e.requests,o=e.doorsOpen,l=e.requestElevator;return r.a.createElement("div",{className:"floor-bank panel"},t.map(function(e){return r.a.createElement(O,{floor:e,floors:t,isCurrentFloor:e===n,elevatorDoorsOpen:o,requests:a.filter(function(t){return t.floor===e}),requestElevator:l,key:e})}))},C=function(e){var t=e.floors,n=e.destinations,a=e.addDestination,o=function(e){return!!n.find(function(t){return t===e})};return r.a.createElement("div",{className:"elevator-display"},t.map(function(e){return r.a.createElement(b,{children:e,key:e,className:u()(o(e)&&"toggled"),onClick:function(){return a(e)}})}))},j=function(){return r.a.createElement("div",{className:"panel"},r.a.createElement("h4",null,"A brief explanation of the UI"),r.a.createElement("div",{className:"panel"},r.a.createElement("h3",null,"Top bar"),r.a.createElement("p",null,"From left to right"),r.a.createElement("p",null,r.a.createElement("b",null,"Step by step mode: ")," Clicking this button will enter step by step mode. This means the elevator will only run one cycle of its state machine with each click on this button.  This can be useful for watching what the elevator does under certain circumstances."),r.a.createElement("p",null,r.a.createElement("b",null,"Play/Fast Forward: ")," This button will exit step by step mode, and subsequent clicks will cycle between fast and regular play speeds."),r.a.createElement("p",null,r.a.createElement("b",null,"Random Passenger: ")," When you want to add a passenger to the simulation pushing this button will do so."),r.a.createElement("p",null,r.a.createElement("b",null,"Simulate usage: ")," This will periodically add random passengers to the simulation at random intervals.  Handy for seeing how the elevator will behave under normal circumstances. Clicking again will disable this feature."),r.a.createElement("p",null,r.a.createElement("b",null,"Reset: ")," If you want to put the elevator back into its initial state click this button. This is useful when you want to run specific test.  This button will not reset the play settings so you may want to make sure you enter step by step mode, and disabled usage simulation before resetting.")),r.a.createElement("div",{className:"panel"},r.a.createElement("h3",null,"Left section"),r.a.createElement("p",null,"This section is broken up into floors. Pressing any up or down button will summon the elevator to that floor. It also show the current floor of the elevator, and when the doors are open.")),r.a.createElement("div",{className:"panel"},r.a.createElement("h3",null,"Right section"),r.a.createElement("p",null,"This represents the options available to a passenger inside the elevator. Pressing any of the numbered buttons will inform the elevator that you want to travel to that level.")))},y=function(e){var t=0,n=1,a=1,r=[],o=[],l=0,i=0,s=0,u=function(){var e=function(e){return e*a>n*a},t=r.filter(e);return!(o.map(function(e){return e.floor}).filter(e).length+t.length)},m=function(){if(h().length)return!0;if(p().length){if(u())return!0;if(g().length)return!0}return!1},h=function(){return r.filter(function(e){return e===n})},p=function(){return o.filter(function(e){return e.floor===n})},g=function(){return p().filter(function(e){return e.direction===a})},b=function(){return 1===t},v=function(e){return e==n&&b()},E=function(){i=0,t=2},w=function(){b()&&(s=l)},O=f(d),k=O.dispatch,C=O.on;return{addDestination:function(e){v(e)?s=0:(r.push(e),1===t&&w(),k.destinationsChange(Object(c.a)(r)))},requestElevator:function(e,t){v(e)?s=0:(o.push({floor:e,direction:t}),k.requestsChange(Object(c.a)(o)))},passTime:function(){switch(t){case 0:if(m()){!function(){s=0,r=r.filter(function(e){return e!==n});var e=u()?function(e){return e.floor!==n}:function(e){return e.floor!==n||e.direction!==a};o=o.filter(e),t=1,k.doorsOpen(n,a,u()),k.doorsChange(b()),k.destinationsChange(Object(c.a)(r)),k.requestsChange(Object(c.a)(o))}();break}if(r.length+o.length){u()&&(a*=-1),E();break}break;case 1:if(s>=l){t=0,k.doorsChange(b());break}++s;break;case 2:if(i>=0){if(n+=a,k.floorChanges(n),m()){t=0;break}E();break}++i;break;default:throw"unhandled elevator state ".concat(t)}k.timePasses()},setOpenTimeout:function(e){l=e},allowDoorsToClose:w,reset:function(){t=0,s=0,i=0,n=1,a=1,r=[],o=[],k.reset(n,Object(c.a)(r),Object(c.a)(o),b())},on:C}}(10),T=[],N=1;N<=10;++N)T.push(N);var q=m(y,T);var S=function(){var e=Object(a.useState)(0),t=Object(i.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)([]),s=Object(i.a)(l,2),c=s[0],f=s[1],d=Object(a.useState)([]),m=Object(i.a)(d,2),h=m[0],p=m[1],g=Object(a.useState)(!1),b=Object(i.a)(g,2),v=b[0],O=b[1],N=Object(a.useState)(!1),S=Object(i.a)(N,2),D=S[0],P=S[1],F=Object(a.useState)(!1),I=Object(i.a)(F,2),x=I[0],A=I[1];Object(a.useEffect)(function(){var e=[];return e.push(y.on.floorChanges(o)),e.push(y.on.destinationsChange(f)),e.push(y.on.requestsChange(p)),e.push(y.on.doorsChange(O)),e.push(y.on.reset(function(e,t,n,a){o(e),f(t),p(n),O(a)})),e.push(q.on.toggle(P)),y.reset(),q.toggle(),function(){return e.forEach(function(e){return e()})}},[]);var R=y.addDestination,U=y.requestElevator,_=y.reset,M=y.passTime,J=y.setOpenTimeout,Q=q.spawn,B=q.toggle;return r.a.createElement("div",{className:u()("app",x&&"quick-animations")},r.a.createElement("div",{className:"panel row top-bar"},r.a.createElement(E,{passTime:M,setOpenTimeout:J,setQuickAnimations:A}),r.a.createElement(w,{spawnPassenger:Q,toggleUsageSimulator:B,reset:_,usageSimulatorIsEnabled:D,elevator:y})),r.a.createElement("div",{className:"row"},r.a.createElement(k,{floors:T,currentFloor:n,requests:h,doorsOpen:v,requestElevator:U}),r.a.createElement(C,{floors:T,destinations:c,addDestination:R})),r.a.createElement(j,null))};l.a.render(r.a.createElement(S,null),document.getElementById("root"))},6:function(e,t,n){e.exports=n(14)}},[[6,1,2]]]);
//# sourceMappingURL=main.e1e5707b.chunk.js.map