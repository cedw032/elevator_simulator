(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,n,t){e.exports=t(13)},,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(4),i=t.n(a),u=(t(11),t(12),function(e){var n={};return e.reduce(function(e,t){return n[t]=[],e.on[t]=function(e){return n[t].push(e),function(){n[t]=n[t].filter(function(n){return n!==e})}},e.dispatch[t]=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];n[t].forEach(function(e){return e.apply(void 0,r)})},e},{dispatch:{},on:{}})}),c=["doorsOpen","doorsClose","floorChange","timeElapsed","elevatorRequested","destinationAdded","reset"],l=function(e){for(var n=0,t=0,r=0,o=1,a=1,i=[],l=[],s=0,f=[],d=1;d<=e;++d)f.push(d);var v=function(){var e=function(e){return e*a>o*a},n=i.filter(e);return!(l.map(function(e){return e.floor}).filter(e).length+n.length)},m=function(){if(h().length)return!0;if(p().length){if(v())return!0;if(g().length)return!0}return!1},h=function(){return i.filter(function(e){return e===o})},p=function(){return l.filter(function(e){return e.floor===o})},g=function(){return p().filter(function(e){return e.direction===a})},E=function(){return 1===n},b=function(){r=0,n=2},w=function(){E()&&(t=s)},k=u(c),O=k.dispatch,C=k.on;return{addDestination:function(e){i.push(e),1===n&&w(),O.destinationAdded()},requestElevator:function(e,n){l.push({floor:e,direction:n}),O.elevatorRequested()},elapseTime:function(){switch(n){case 0:if(m()){!function(){t=0,i=i.filter(function(e){return e!==o});var e=v()?function(e){return e.floor!==o}:function(e){return e.floor!==o||e.direction!==a};l=l.filter(e),n=1,O.doorsOpen(o,a,v())}();break}if(i.length+l.length){v()&&(a*=-1),b();break}break;case 1:if(t>=s){n=0,O.doorsClose();break}++t;break;case 2:if(r>=0){if(o+=a,O.floorChange(),m()){n=0;break}b();break}++r}O.timeElapsed()},allowDoorsToClose:w,reset:function(){n=0,t=0,r=0,o=1,a=1,i=[],l=[],O.reset()},setOpenTimeout:function(e){return s=e},currentFloor:function(){return o},floors:function(){return[].concat(f)},isOpen:E,isDestination:function(e){return 0!==i.filter(function(n){return n===e}).length},isRequested:function(e,n){return 0!==l.filter(function(t){return t.floor===e&&t.direction===n}).length},on:C}},s=function(e){var n,t=function(){return!!n},r=function(){var n=function(e,n){return Math.round((n-e)*Math.random())+e},t=function(){return n(e.floors()[0],+e.floors().slice(-1))},r=0,o=0;switch(n(1,-1)){case 1:r=e.floors()[0],o=t();break;case-1:r=t(),o=e.floors()[0];break;default:r=t(),o=t()}if(r!==o){var a=r<o?1:-1,i=!1,u=function(){c(),l()},c=e.on.reset(u),l=e.on.doorsOpen(function(n,t,c){if(!i&&n===r&&(c||t===a))return e.addDestination(o),void(i=!0);i&&n===o&&(e.allowDoorsToClose(),u())});e.requestElevator(r,a)}},o=function(){Math.random()<.16&&r()};return{toggle:function(){if(t())return n(),void(n=void 0);n=e.on.timeElapsed(o)},spawn:r,enabled:t}},f=t(2),d=t(1),v=t.n(d),m=function(){var e=Object(r.useState)(),n=Object(f.a)(e,2)[1];return function(){return n({})}},h=[],p=function(e){var n=m(),t=Object(r.useState)(h.length),o=Object(f.a)(t,1)[0],a=h[o];a||(a={value:e},h.push(a));return[a,function(e){a.value=e,n()}]},g=[800,140],E=function(e){var n=e.elevator,t=p(!0),a=Object(f.a)(t,2),i=a[0],u=a[1],c=p(0),l=Object(f.a)(c,2),s=l[0],d=l[1];Object(r.useEffect)(function(){i.value&&h()},[]);var m=function(){d((s.value+1)%g.length),console.log("autoplay speed",s.value)},h=function(){u(!0),n.setOpenTimeout(5),setTimeout(E)},E=function e(){if(i.value)return n.elapseTime(),void setTimeout(e,g[s.value]);n.setOpenTimeout(0)};return o.a.createElement("div",{className:"row"},o.a.createElement("button",{children:"|>",onClick:function(){u(!1),n.elapseTime()}}),o.a.createElement("button",{children:s.value?">>":">",className:v()(i.value&&"toggled"),onClick:function(){i.value?m():h()}}))},b=function(e){var n=e.usageSimulator,t=e.elevator,r=m();return o.a.createElement("div",{className:"row"},o.a.createElement("button",{onClick:function(){n.spawn()},children:"Random passenger"}),o.a.createElement("button",{className:v()(n.enabled()&&"toggled"),onClick:function(){n.toggle(),r()},children:"Simulate usage"}),o.a.createElement("button",{onClick:function(){t.reset()},children:"x"}))},w=function(e){var n=m();Object(r.useEffect)(function(){var t=[];return e.forEach(function(e){return t.push(e(n))}),function(){return t.forEach(function(e){return e()})}},[])},k=function(e){var n=e.floor,t=e.elevator;w([t.on.floorChange,t.on.doorsOpen,t.on.doorsClose,t.on.elevatorRequested,t.on.reset]);var r=function(e){return t.isRequested(n,e)},a=function(e){return function(){return t.requestElevator(n,e)}};return o.a.createElement("div",{className:v()("row","floor-display",t.currentFloor()===n&&"highlight")},o.a.createElement("div",null,"Floor ",n),o.a.createElement("button",{className:v()(r(-1)&&"toggled"),onClick:a(-1),disabled:n===t.floors()[0],children:"Down"}),o.a.createElement("button",{className:v()(r(1)&&"toggled"),onClick:a(1),disabled:n===+t.floors().slice(-1),children:"Up"}),t.currentFloor()===n&&t.isOpen()?o.a.createElement("div",{className:"highlight2"},"Open"):o.a.createElement("div",{className:"hidden"},"Open"))},O=function(e){var n=e.elevator;return w([n.on.doorsOpen,n.on.destinationAdded,n.on.reset]),o.a.createElement("div",{className:"elevator-display"},n.floors().map(function(e){return o.a.createElement("button",{children:e,key:e,className:v()(n.isDestination(e)&&"toggled"),onClick:function(){return n.addDestination(e)}})}))},C=l(10),N=s(C);var T=function(){return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"panel row top-bar"},o.a.createElement(E,{elevator:C}),o.a.createElement(b,{usageSimulator:N,elevator:C})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"floor-bank panel"},C.floors().map(function(e){return o.a.createElement(k,{floor:e,elevator:C,key:e})})),o.a.createElement(O,{elevator:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[5,1,2]]]);
//# sourceMappingURL=main.f551d5f9.chunk.js.map